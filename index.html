<!DOCTYPE html>
<html>
  <head>
    <script src="qtest.js"></script>
    <script src="q.js"></script>
    <script>
      /* Setup test resource */
      const resourceURL = 
      
      "/myApp/_api/lists(guid'List0-UnreadableId')" + 
      "/items?$filter=Id eq 2379&$select=ID,OData_" + 
      "List0_UnreadableColumnName,OData_List1_Unre" + 
      "adableExpandedColumnName/ID,OData_List1_Unr" + 
      "eadableExpandedColumnName/OData_List1_Unrea" + 
      "dableColumnName&$expand=OData_List1_Unreada" + 
      "bleExpandedColumnName";

      QResource(resource => resource === resourceURL, () => {
        return {
          d: {
            results: [
              {
                ID: 2379,
                OData_List0_UnreadableColumnName: "Bob",
                OData_List1_UnreadableExpandedColumnName: { results: [] }
              }
            ]
          }
        }
      });

      /* Configuration */
      Q.config({app: 'myApp'});

      const List1Expand = Q(
        /* If column expanded the source must be column name. */
          'OData_List1_UnreadableExpandedColumnName',
        {
          Id: 'ID',
          Name: 'OData_List1_UnreadableColumnName'
        }
      );

      /* Query template generated by qgen.js */
      const List0Query = Q('List0-UnreadableId', { /* xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx */
        Id: 'ID',
        Name: 'OData_List0_UnreadableColumnName', /*OData__x0000__x0000__x0000__x0000__x00 */
        Expanded: List1Expand
      });

      List0Query.get(`${List0Query.Name} eq 'Bob'`).then(data => console.log(data))
    </script>
  </head>
  <body></body>
</html>
